syntax = "proto3";

service Replicator {
  rpc ReplicateLog(LogTuple) returns (LogResponse);
  rpc GetMissedLogs(MissedLogsRequest) returns (MissedLogsResponse);
  rpc Heartbeat(HeartbeatRequest) returns (HeartbeatResponse);
}

message LogTuple {
  int32 id = 1;
  string message = 2;
}

message LogResponse {
  string message = 1;
  bool success = 2;
}

message MissedLogsRequest {
  int32 last_received_id = 1;
}

message MissedLogsResponse {
  repeated LogTuple logs = 1;
}

message HeartbeatRequest {
  string secondary_name = 1;
}

message HeartbeatResponse {
  string status = 1;
  int32 last_log_id = 2;
}